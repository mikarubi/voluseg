"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5369],{4943:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>a,frontMatter:()=>r,metadata:()=>t,toc:()=>d});var i=l(4848),s=l(8453);const r={sidebar_label:"nwb",title:"tools.nwb"},o=void 0,t={id:"reference/tools/nwb",title:"tools.nwb",description:"pynwb",source:"@site/docs/reference/tools/nwb.md",sourceDirName:"reference/tools",slug:"/reference/tools/nwb",permalink:"/voluseg/docs/reference/tools/nwb",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{sidebar_label:"nwb",title:"tools.nwb"},sidebar:"docsSidebar",previous:{title:"load_volume",permalink:"/voluseg/docs/reference/tools/load_volume"},next:{title:"parameter_dictionary",permalink:"/voluseg/docs/reference/tools/parameter_dictionary"}},c={},d=[{value:"pynwb",id:"pynwb",level:2},{value:"contextmanager",id:"contextmanager",level:2},{value:"datetime",id:"datetime",level:2},{value:"tzlocal",id:"tzlocal",level:2},{value:"uuid4",id:"uuid4",level:2},{value:"np",id:"np",level:2},{value:"open_nwbfile_local",id:"open_nwbfile_local",level:4},{value:"open_nwbfile_remote",id:"open_nwbfile_remote",level:4},{value:"open_nwbfile",id:"open_nwbfile",level:4},{value:"find_nwbfile_volume_object_name",id:"find_nwbfile_volume_object_name",level:4},{value:"get_nwbfile_volume",id:"get_nwbfile_volume",level:4},{value:"write_nwbfile",id:"write_nwbfile",level:4}];function h(e){const n={code:"code",h2:"h2",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"pynwb",children:"pynwb"}),"\n",(0,i.jsx)(n.h2,{id:"contextmanager",children:"contextmanager"}),"\n",(0,i.jsx)(n.h2,{id:"datetime",children:"datetime"}),"\n",(0,i.jsx)(n.h2,{id:"tzlocal",children:"tzlocal"}),"\n",(0,i.jsx)(n.h2,{id:"uuid4",children:"uuid4"}),"\n",(0,i.jsx)(n.h2,{id:"np",children:"np"}),"\n",(0,i.jsx)(n.h4,{id:"open_nwbfile_local",children:"open_nwbfile_local"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"@contextmanager\ndef open_nwbfile_local(file_path: str)\n"})}),"\n",(0,i.jsx)(n.p,{children:"Context manager to open and close a local NWB file."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"file_path"})," (",(0,i.jsx)(n.code,{children:"str"}),"): Path to NWB file."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Yields"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pynwb.NWBFile"}),": The opened NWB file."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"open_nwbfile_remote",children:"open_nwbfile_remote"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"@contextmanager\ndef open_nwbfile_remote(s3_url: str, output_path: str)\n"})}),"\n",(0,i.jsx)(n.p,{children:"Context manager to open and close a remote NWB file."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"s3_url"})," (",(0,i.jsx)(n.code,{children:"str"}),"): S3 URL to NWB file."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"output_path"})," (",(0,i.jsx)(n.code,{children:"str"}),"): Output path to cache the remote file."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Yields"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pynwb.NWBFile"}),": The opened NWB file."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"open_nwbfile",children:"open_nwbfile"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"@contextmanager\ndef open_nwbfile(input_path: str, remote: bool, output_path: str = None)\n"})}),"\n",(0,i.jsx)(n.p,{children:"Open and close an NWB file from either a local or remote source."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"input_path"})," (",(0,i.jsx)(n.code,{children:"str"}),"): Path to the NWB file. This can be a local file path or an S3 URL."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"remote"})," (",(0,i.jsx)(n.code,{children:"bool"}),"): If True, the file is assumed to be remote (S3 URL), otherwise, it is assumed to be a local file."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"output_path"})," (",(0,i.jsx)(n.code,{children:"str"}),"): Output path, only used to cache remote files."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Yields"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pynwb.NWBFile"}),": The opened NWB file."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"find_nwbfile_volume_object_name",children:"find_nwbfile_volume_object_name"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"def find_nwbfile_volume_object_name(nwbfile: pynwb.NWBFile) -> str\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Find the name of the ",(0,i.jsx)(n.code,{children:"TwoPhotonSeries"})," volume object in the NWB file."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"nwbfile"})," (",(0,i.jsx)(n.code,{children:"pynwb.NWBFile"}),"): NWB file."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Returns"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"str"}),": Name of the volume object."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"get_nwbfile_volume",children:"get_nwbfile_volume"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def get_nwbfile_volume(\n        nwbfile: pynwb.NWBFile,\n        acquisition_name: str = "TwoPhotonSeries") -> pynwb.NWBFile\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Get ",(0,i.jsx)(n.code,{children:"TwoPhotonSeries"})," object from NWB file."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"nwbfile"})," (",(0,i.jsx)(n.code,{children:"pynwb.NWBFile"}),"): NWB file."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"acquisition_name"})," (",(0,i.jsx)(n.code,{children:'str (default: "TwoPhotonSeries")'}),"): Acquisition name."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Returns"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pynwb.NWBFile"}),": NWB file."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"write_nwbfile",children:"write_nwbfile"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"def write_nwbfile(output_path: str, cell_x: np.ndarray, cell_y: np.ndarray,\n                  cell_z: np.ndarray, cell_weights: np.ndarray,\n                  cell_timeseries: np.ndarray) -> None\n"})}),"\n",(0,i.jsx)(n.p,{children:"Write results to a local NWB file."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Arguments"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"output_path"})," (",(0,i.jsx)(n.code,{children:"str"}),"): Output path."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"cell_x"})," (",(0,i.jsx)(n.code,{children:"np.ndarray"}),"): Voxel X coordinates for all cells."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"cell_y"})," (",(0,i.jsx)(n.code,{children:"np.ndarray"}),"): Voxel Y coordinates for all cells."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"cell_z"})," (",(0,i.jsx)(n.code,{children:"np.ndarray"}),"): Voxel Z coordinates for all cells."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"cell_weights"})," (",(0,i.jsx)(n.code,{children:"np.ndarray"}),"): Voxel weights for all cells."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"cell_timeseries"})," (",(0,i.jsx)(n.code,{children:"np.ndarray"}),"): Fluorescence timeseries data for all cells."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Returns"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"None"})}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>o,x:()=>t});var i=l(6540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);