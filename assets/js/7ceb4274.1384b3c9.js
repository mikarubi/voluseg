"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1967],{5676:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>d});var t=s(4848),l=s(8453);const i={title:"Running Voluseg Pipeline",sidebar_position:2},r=void 0,a={id:"getting_started/running",title:"Running Voluseg Pipeline",description:"Pipeline Overview",source:"@site/docs/getting_started/running.mdx",sourceDirName:"getting_started",slug:"/getting_started/running",permalink:"/voluseg/docs/getting_started/running",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Running Voluseg Pipeline",sidebar_position:2},sidebar:"docsSidebar",previous:{title:"Installation",permalink:"/voluseg/docs/getting_started/installation"},next:{title:"Running from Container",permalink:"/voluseg/docs/getting_started/running_container"}},o={},d=[{value:"Pipeline Overview",id:"pipeline-overview",level:2},{value:"Running a demo workflow",id:"running-a-demo-workflow",level:2},{value:"Download the necessary resources",id:"download-the-necessary-resources",level:3},{value:"Setup pipeline parameters",id:"setup-pipeline-parameters",level:3},{value:"Step 1. Process volumes",id:"step-1-process-volumes",level:3},{value:"Step 2. Align volumes",id:"step-2-align-volumes",level:4},{value:"Step 3. Mask volumes",id:"step-3-mask-volumes",level:3},{value:"Step 4. Detect cells",id:"step-4-detect-cells",level:3},{value:"Step 5. Clean cells",id:"step-5-clean-cells",level:3}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"pipeline-overview",children:"Pipeline Overview"}),"\n",(0,t.jsx)(n.p,{children:"The Voluseg pipeline consists of an initial setup of parameters followed by five consecutive steps:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Process volumes"}),"\n",(0,t.jsx)(n.li,{children:"Align volumes"}),"\n",(0,t.jsx)(n.li,{children:"Mask volumes"}),"\n",(0,t.jsx)(n.li,{children:"Detect cells"}),"\n",(0,t.jsx)(n.li,{children:"Clean cells"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"running-a-demo-workflow",children:"Running a demo workflow"}),"\n",(0,t.jsx)(n.p,{children:"To get familiar with Voluseg, let's run a simple example with a demo dataset."}),"\n",(0,t.jsx)(n.h3,{id:"download-the-necessary-resources",children:"Download the necessary resources"}),"\n",(0,t.jsx)(n.p,{children:"To run the demo you will need start by downloading the sample data to your local machine:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import voluseg\n\n# Download sample data\nvoluseg.tools.download_sample_data("/path/to/input/")\n'})}),"\n",(0,t.jsx)(n.h3,{id:"setup-pipeline-parameters",children:"Setup pipeline parameters"}),"\n",(0,t.jsxs)(n.p,{children:["Voluseg provides a dictionary with default parameters that can be modified to fit your specific needs. You can read more about the parameters in the ",(0,t.jsx)(n.a,{href:"/docs/getting_started/parameters",children:"Parameters"})," section. You can access the default parameters dictionary, edit and process it by running:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"# Set parameters\nparameters_0 = voluseg.parameter_dictionary()\nparameters_0['dir_ants'] = '/path/to/ants/bin/'\nparameters_0['dir_input'] = '/path/to/input/downloaded_data/'\nparameters_0['dir_output'] = '/path/to/output/directory/'\nparameters_0['registration'] = 'high'\nparameters_0['diam_cell'] = 5.0\nparameters_0['f_volume'] = 2.0\n\n# Process parameters\nparameters = voluseg.step0_process_parameters(parameters_0)\n"})}),"\n",(0,t.jsxs)(n.p,{children:["A parameters file will be saved in the output directory with the name ",(0,t.jsx)(n.code,{children:"parameters.json"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"step-1-process-volumes",children:"Step 1. Process volumes"}),"\n",(0,t.jsx)(n.p,{children:"The first step of the pipeline is to process the input volumes and to save them as nifti files. This step will perform downsampling and padding if specified in parameters."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"voluseg.step1_process_volumes(parameters)\n"})}),"\n",(0,t.jsx)(n.h4,{id:"step-2-align-volumes",children:"Step 2. Align volumes"}),"\n",(0,t.jsx)(n.p,{children:"In the second step, the volumes are aligned to a reference volume. This step will generate ANTs transform files (.mat)."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"voluseg.step2_align_volumes(parameters)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-3-mask-volumes",children:"Step 3. Mask volumes"}),"\n",(0,t.jsxs)(n.p,{children:["In the third step, the volumes are masked to create an intensity mask from the average registered volume. This step will produce figures with masks and histograms, and will save ",(0,t.jsx)(n.code,{children:"mean_timeseries.hdf5"})," and ",(0,t.jsx)(n.code,{children:"volume0.hdf5"})," files."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"voluseg.step3_mask_volumes(parameters)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-4-detect-cells",children:"Step 4. Detect cells"}),"\n",(0,t.jsx)(n.p,{children:"In the fourth step, cells are detected in volumetric blocks."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"voluseg.step4_detect_cells(parameters)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-5-clean-cells",children:"Step 5. Clean cells"}),"\n",(0,t.jsx)(n.p,{children:"In the final step, the detected cells are cleaned by removing noisy cells, detrending and detecting a baseline signal."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"voluseg.step5_clean_cells(parameters)\n"})})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var t=s(6540);const l={},i=t.createContext(l);function r(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);